<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Eva Zhang</title>
    <meta name="description" content="Eva Zhang's personal website">
    
    <!-- Social Meta Tags -->
    <meta property="og:url" content="https://evazhang.ai">
    <meta property="og:type" content="website">
    <meta property="og:title" content="Eva Zhang">
    <meta property="og:description" content="eva zhang personal website">
    
    <link rel="stylesheet" type="text/css" href="./css/index.css">
    <style>
        .sparkle-btn {
            display: inline-block;
            padding: 4px 16px;
            background: linear-gradient(90deg, #f9d423, #ff4e50, #e1bee7, #42e695, #3bb2b8, #f9d423);
            background-size: 400% 400%;
            color: #fff !important;
            font-weight: bold;
            border: none;
            border-radius: 20px;
            box-shadow: 0 2px 8px rgba(255, 78, 80, 0.15);
            text-decoration: none;
            position: relative;
            animation: sparkle 2s linear infinite;
            transition: box-shadow 0.2s;
        }
        .sparkle-btn:hover {
            box-shadow: 0 4px 16px rgba(255, 78, 80, 0.25);
            filter: brightness(1.1);
        }
        @keyframes sparkle {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .eva-geometric {
            position: fixed;
            right: 20px;
            top: 50%;
            transform: translateY(-50%);
            z-index: 1000;
            opacity: 0.8;
        }

        @media (max-width: 768px) {
            .eva-geometric {
                display: none;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="sidebar">
            <nav class="sidebar-nav">
                <a href="#currently">Currently</a>
                <a href="#before">Before</a>
                <a href="#topics">Topics of interest</a>
                <a href="#hobbies">Hobbies</a>
                <a href="#content">Content</a>
                <div class="sub-nav" id="content-subnav">
                    <a href="#research">Research</a>
                    <a href="#writing">Writing</a>
                    <a href="#quotes">Quotes</a>
                    <a href="#movies">Movies</a>
                    <a href="#reading">Reading</a>
                    <a href="#investing">Investing</a>
                    <a href="#projects">Projects Archive</a>
                </div>
                <a href="#looking">Looking for</a>
                <a href="#random">Random</a>
                <div class="sub-nav" id="random-subnav">
                    <a href="#feedback">Feedback</a>
                    <a href="#other-people">Other People</a>
                    <a href="#loaded-words">Loaded Words</a>
                </div>
                <a href="#contact">Contact</a>
            </nav>
        </div>

        <div id="maincontent">
            <h2>eva's digital space</h2>
            <p style="color: #666; margin-top: 5px; margin-bottom: 25px; font-size: 14px;">you've reached eva zhang's digital presence</p>
            
            <div class="about-me">
                <div id="currently" class="section active">
                    <h3>Currently</h3>
                    <ul>
                        <li>work on ai research and engineering at a startup called ritual</li>
                        <li>live in sf</li>
                        <li>you can find some more of my work under content</li>
                        <li>you can find my experiences <a href="#before">here</a> and current interests <a href="#topics">here</a></li>
                        <li style="background: #f7f3ff; border-radius: 12px; padding: 6px 14px; margin-top: 8px;">
                            an archive of my old website (less minimalist) can be found 
                            <a href="https://archive.evazhang.ai" target="_blank" style="font-weight: bold; color: #6c47a6; text-decoration: underline;">here</a> ✨
                        </li>
                    </ul>
                </div>
                
                <div id="before" class="section">
                    <h3>Before</h3>
                    <ul>
                        <li>built a startup called socket (acq. 2023)</li>
                        <li>spent time working on ai research, engineering, and policy</li>
                        <li>studied cs (m.s, ai track) and math (b.s) at stanford</li>
                        <li>lived in nyc, vancouver, and shanghai</li>
                    </ul>
                </div>

                <div id="topics" class="section">
                    <h3>Topics of interest</h3>
                    <div class="topics">
                        <strong style="color: #666; font-size: 1.1em; display: block; margin-top: 20px;">current open questions</strong>
                        <strong>how to think about and apply intelligence</strong>
                        <ul>
                            <li>how do you use ai to solve the world's problems? prms outside of coding and math</li>
                            <li>when should a model stop thinking? enumerating stopping conditions</li>
                            <li>what is the minimal set of progress needed to make a soft, safe robot that can help humans stand up?</li>
                            <li>ai prompting humans to do things</li>
                        </ul>
                        <strong>how to live</strong>
                        <ul>
                            <li>bad, default idea traps for people</li>
                            <li>effective undercommunication</li>
                        </ul>
                        <strong style="color: #666; font-size: 1.1em; display: block; margin-top: 20px;">other topics</strong>
                        <strong>can you apply ai to the world's problems?</strong>
                        <ul>
                            <li>data bottlenecks - ai2050 and plaintext at schmidt futures</li>
                            <li>what should buying and selling of ai look like? policy solutions and ai insurance</li>
                            <li>climate research (andrew ng stanford ml group)</li>
                            <li>research at stanford hai and election safety for the stanford internet observatory </li>
                            <li>various internships at startups and big tech companies (infinitus, google computer vision, apple sensing and connectivity)</li>
                        </ul>

                        <strong>multiple agents in real-world domains</strong>
                        <ul>
                            <li>how should robots generalize?</li>
                            <li>how do agents competing with each other for data look? <a href="https://proceedings.mlr.press/v130/ginart21a.html" target="_blank">project link here</a></li>
                        </ul>

                        <strong>how do black-box models work?</strong>
                        <ul>
                            <li>started and lectured for a class on interpretability and fairness at stanford (<a href="https://engineering.stanford.edu/news/how-computer-science-department-teaching-ethics-its-students" target="_blank">article</a>, <a href="https://web.archive.org/web/20200712083118/http://cs81si.stanford.edu/" target="_blank">course website</a>)</li>
                            <li>worked on national procurement policy for model interpretability (<a href="https://fas.org/publication/a-national-framework-for-ai-procurement/" target="_blank">report</a>, <a href="https://hai.stanford.edu/sites/default/files/2020-06/StanfordWonks%26TechiesEUAIWhitePaper.pdf" target="_blank">eu policy paper</a>)</li>
                        </ul>

                        <strong>how do you use ai to mitigate natural disasters?</strong>
                        <ul>
                            <li>predicting famines in yemen and somalia for the world bank president's office</li>
                            <li>building models to protect astronauts from solar flares at nasa supercomputing</li>
                        </ul>

                        <strong>oss money</strong>
                        <ul>
                            <li>crypto as an incentive network</li>
                            <li>effective search of social data </li>
                            <li>helped run the biggest ubi pilot so far in the us in compton, california (my opinions are probably not what you think they are)</li>
                            <li>stablecoins</li>
                        </ul>
                    </div>
                </div>

                <div id="hobbies" class="section">
                    <h3>Hobbies</h3>
                    <ul>
                        <li>todo</li>
                    </ul>
                </div>
                
                <div id="content" class="section">
                    <h3>Content</h3>
                    <ul>
                        <li>stuff i've made (research, projects, writing)</a></li>
                    </ul>
                </div>

                <div id="research" class="section">
                    <h3>Research</h3>
                    <ul>
                        <li>you can look for research topics under "topics of interest"</li>
                        <li><a href="https://scholar.google.com/citations?user=YOUR_ID" target="_blank">google scholar</a></li>
                    </ul>
                    <div style="margin-top: 15px;">
                        <div style="margin-bottom: 15px;">
                            <strong><a href="#" target="_blank">vTune: Verifiable Fine-Tuning for LLMs Through Backdooring</a></strong><br>
                            <span style="color: #666;"><strong>Eva Zhang</strong>*, Arka Pal, Akilesh Potti, Micah Goldblum</span><br>
                            <span style="color: #666;">2024</span>
                        </div>

                        <div style="margin-bottom: 15px;">
                            <strong><a href="https://proceedings.mlr.press/v130/ginart21a.html" target="_blank">Competing AI: How does competition feedback affect machine learning?</a></strong><br>
                            <span style="color: #666;">Tony Ginart, <strong>Eva Zhang</strong>, Yongchan Kwon, James Zou</span><br>
                            <span style="color: #666;">2021</span>
                        </div>

                        <div style="margin-bottom: 15px;">
                            <strong><a href="#" target="_blank">Latent Actor-Critic with Intrinsic Motivation and Skill Hierarchy</a></strong><br>
                            <span style="color: #666;">Ademi Adeniji*, <strong>Eva Zhang</strong>*</span><br>
                            <span style="color: #666;">2020</span>
                        </div>
                        
                        <div style="margin-bottom: 15px;">
                            <strong><a href="https://s3.us-east-1.amazonaws.com/climate-change-ai/papers/neurips2019/5/paper.pdf" target="_blank">DeepWind: Weakly supervised localization of wind turbines in satellite imagery</a></strong><br>
                            <span style="color: #666;">Sharon Zhou, Jeremy Irvin, Zhecheng Wang, <strong>Eva Zhang</strong>, Jabs Aljubran, Will Deadrick, Ram Rajagopal, Andrew Ng</span><br>
                            <span style="color: #666;">2019</span>
                        </div>
                    </div>
                </div>

                <div id="writing" class="section">
                    <h3>Writing</h3>
                    <ul>
                        <li>my old substack is <a href="https://evaz.substack.com" target="_blank">here</a></li>
                        <li><a href="https://evaz.substack.com/p/rfs" target="_blank">this post</a> did well on HN (top 3 trending)</li>
                        <li>new writing coming soon...</li>
                    </ul>
                </div>

                <div id="quotes" class="section">
                    <h3>Quotes</h3>
                    <p style="color: #666; font-size: 14px; margin-bottom: 20px;">favourite book and movie quotes</p>
                    <ul>
                        <li>"There are two motives for reading a book; one, that you enjoy it; the other, that you can boast about it."</li>
                        <li>"Love can flourish only as long as it is free and spontaneous; it tends to be killed by the thought of duty."</li>
                        <!-- <li>"A pair of powerful spectacles has sometimes sufficed to cure a person in love."</li> -->
                        <li>"Men who are unhappy, like men who sleep badly, are always proud of the fact."</li>
                        <li>"Nothing is more scandalous than a man that is proud of his humility."</li>
                        <li>"It is impossible to think of Howard Hughes without seeing the apparently bottomless gulf between what we say we want and what we do want, between what we officially admire and secretly desire, between, in the largest sense, the people we marry and the people we love."</li>
                        <li>"Plants such as peonies, azaleas and camellias will be able to produce beautiful flowers, end of the world or not. If men would give some thought to this fact, they would understand. And if people took notice of the masters of even these times, they would be able to say that there are masters in the various arts. But people become imbued with the idea that the world has come to an end and no longer put forth any effort. This is a shame. There is no fault in the times."</li>
                        <li>"When someone is giving you his opinion, you should receive it with deep gratitude even though it is worthless."</li>
                        <li>"At first it is an oppressive thing to run until one is breathless. But it is an extraordinarily good feeling when one is standing around after the running. More than that, it is even better to sit down. More than that, it is even better to lie down. And more than that, to put down a pillow and sleep soundly is even better. A man's whole life should be like this. To exert oneself to a great extent when one is young and then to sleep when he is old or at the point of death is the way it should be. But to first sleep and then exert oneself."</li>
                        <li>"With an intense, fresh and undelaying spirit, one will make his judgments within the space of seven breaths."</li>
                        <li>"If it is a single day's work, one should be able to put up with it. Tomorrow, too, is but a single day."</li>
                        <li>"Something that is not done at that time and at that place will remain unfinished for a lifetime."</li>
                        <li>"A person who becomes fatigued when unhappy is useless."</li>
                        <!-- <li>"You got one life, so do it all."</li> -->
                        <li>"The greats never sacrifice the important for the urgent."</li>
                    </ul>

                    <p style="margin-top: 30px;">tweets and quotes from friends etched into my brain</p>
                    <p style="color: #666; font-size: 14px; margin-bottom: 20px;">bangers. some are modified</p>
                    <ul>
                        <li>"This is a game. You ask for or state or express what you want, and then you either get it or you don't. Whether you get it or not doesn't really matter, what matters is you don't flinch."</li>
                        <li>"You think when you wake up in the mornin yesterday don't count. But yesterday is all that does count. What else is there? Your life is made out of the days it's made out of. Nothin else."</li>
                        <li>"you have access to your optimal policy at all times. you just choose not to follow it. you can literally access it by asking 'what should i be doing rn?'"</li>
                        <li>use ai to 10x output not 0.1x skill</li>

                    </ul>
                </div>

                <div id="movies" class="section">
                    <h3>Movies</h3>
                    <p style="margin-top: 20px;">Classics I rewatch (not necessarily original)</p>
                    <ul>
                        <li>Ocean's 11/12</li>
                        <li>Rounders</li>
                        <li>Risky Business</li>
                        <li>The Incredibles</li>
                        <li>Iron Man 2</li>
                        <li>The Big Short</li>
                        <li>Good Will Hunting</li>
                        <li>Forrest Gump</li>
                        <li>Moneyball</li>
                        <li>Sound of Music (1965)</li>
                        <li>The Social Network</li>
                        <li>Pursuit of Happyness</li>
                        <li>Inception</li>
                        <li>Mr. and Mrs. Smith (2005)</li>
                        <li>The Hunt for Red October</li>
                        <li>The Imitation Game</li>
                        <li>Margin Call</li>
                    </ul>
                </div>

                <div id="reading" class="section">
                    <h3>Reading</h3>
                    <ul>
                        <li>Coming soon...</li>
                    </ul>
                </div>

                <div id="investing" class="section">
                    <h3>investing</h3>
                    <ul>
                        <li><a href="https://www.knowtex.ai/" target="_blank">knowtex ai</a></li>
                        <li><a href="https://www.norm.ai/" target="_blank">norm ai</a></li>
                        <li><a href="https://hamming.ai/" target="_blank">hamming ai</a></li>
                        <li><a href="https://www.kscale.dev/" target="_blank">k-scale</a></li>
                        <li>other ai and stealth robotics cos</li>
                        <li>always looking to hear from cool people working on new projects</li>
                    </ul>
                </div>

                <div id="projects" class="section">
                    <h3>Projects Archive</h3>
                    <ul>
                        <li>Coming soon...</li>
                    </ul>
                </div>

                <div id="random" class="section">
                    <h3>Random</h3>
                    <ul>
                        <li>i welcome ideas and thoughts from people via pseudonyms and anon accounts</li>
                        <li>you can leave thoughts under the feedback section</li>
                    </ul>
                </div>

                <div id="feedback" class="section">
                    <h3>leave feedback and errata for me below</h3>
                    <div class="feedback-form" style="margin-top: 20px;">
                        <h4 style="color: #666; margin-bottom: 10px;">form</h4>
                        <form id="feedbackForm" action="https://formspree.io/f/movvrpzl" method="POST">
                            <div style="margin-bottom: 15px;">
                                <input 
                                    type="text" 
                                    name="name" 
                                    placeholder="your name (optional)"
                                    style="width: 100%;
                                           padding: 8px;
                                           border: 1px solid #ddd;
                                           border-radius: 4px;
                                           font-family: inherit;
                                           text-align: left;">
                            </div>
                            <div style="margin-bottom: 15px;">
                                <input 
                                    type="email" 
                                    name="email" 
                                    placeholder="your email (optional)"
                                    style="width: 100%;
                                           padding: 8px;
                                           border: 1px solid #ddd;
                                           border-radius: 4px;
                                           font-family: inherit;
                                           text-align: left;">
                            </div>
                            <textarea 
                                name="feedback"
                                placeholder="Share your thoughts... the good, the bad, the ugly" 
                                rows="4" 
                                required
                                style="width: 100%;
                                       padding: 10px; 
                                       margin: 10px 0; 
                                       border: 1px solid #ddd; 
                                       border-radius: 4px; 
                                       font-family: inherit;
                                       text-align: left;"></textarea>
                            <button 
                                type="submit" 
                                style="display: block; 
                                       padding: 8px 16px; 
                                       background: #f0f0f0; 
                                       border: 1px solid #ddd; 
                                       border-radius: 4px; 
                                       cursor: pointer; 
                                       font-family: inherit;">
                                Send
                            </button>
                        </form>
                    </div>
                </div>

                <div id="other-people" class="section">
                    <h3>Other People</h3>
                    <ul>
                        <li>List of other people's pages you should follow - coming soon...</li>
                    </ul>
                </div>

                <div id="loaded-words" class="section">
                    <h3>words that attach you to certain opinions</h3>
                    <p style="color: #666; margin-bottom: 15px;">what is the minimal set of things that needs to be said, that precisely mean what you want them to mean? words that imply too little and/or too much than you want when speaking with someone for the first time.</p>
                    <ul>
                        <li>"updating",priors,posteriors</li>
                        <li>upside</li>
                        <li>deprecation</li>
                        <li>optionality, markets</li>
                        <li>maximize utility</li>
                        <li>couch, wonk, crux</li>
                        <li>decentralise</li>
                    </ul>
                </div>

                <div id="looking" class="section">
                    <h3>Looking for</h3>
                    <ul>
                        <li>collaborators on research and content</li>
                        <li>new ways to apply ai to the world's problems - if this is you, please feel free to reach out</li>
                        <li>reading recs</li>
                        <li>new productivity stacks</li>
                        <li>good running routes in sf</li>
                        <li>matcha setups</li>
                    </ul>
                </div>

                <div id="contact" class="section">
                    <h3>Contact</h3>
                    <ul style="margin-bottom: 20px;">
                        <li>drop me a note here or via my email hello [at] evazhang [dot] com</li>
                        <li>i aim to reply to cold emails within 12-24h</li>
                        <li>it's easiest to respond to emails with concrete ideas or questions</li>
                    </ul>
                    
                    <div class="contact-form">
                        <form id="contactForm" action="https://formspree.io/f/xyzzobae" method="POST">
                            <div style="margin-bottom: 15px;">
                                <textarea 
                                    id="message"
                                    name="message" 
                                    placeholder="Your message"
                                    rows="4"
                                    required
                                    style="width: 100%;
                                           padding: 8px;
                                           border: 1px solid #ddd;
                                           border-radius: 4px;
                                           text-align: left;
                                           font-family: inherit;"></textarea>
                            </div>
                            <div style="margin-bottom: 15px;">
                                <input 
                                    type="text" 
                                    id="funfact"
                                    name="funfact" 
                                    placeholder="Share a fun fact about anything you'd like (optional)"
                                    style="width: 100%;
                                           padding: 8px;
                                           border: 1px solid #ddd;
                                           border-radius: 4px;
                                           font-family: inherit;">
                            </div>
                            <button 
                                type="submit"
                                style="display: block;
                                       padding: 8px 16px;
                                       background: #f0f0f0;
                                       border: 1px solid #ddd;
                                       border-radius: 4px;
                                       cursor: pointer;
                                       font-family: inherit;">
                                Send
                            </button>
                        </form>
                    </div>

                    <div style="margin-top: 20px; color: #666; font-size: 0.9em;">
                        <p>or find me on <a href="https://twitter.com/evayzh" target="_blank">twitter</a></p>
                    </div>
                </div>

                <div id="blogroll" class="section">
                    <h3>Blogroll</h3>
                    <ul>
                        <li>Coming soon...</li>
                    </ul>
                </div>
            </div>

            <div class="footer">
                <p style="font-style: italic;">
                    <a href="https://twitter.com/evayzh" target="_blank">twitter</a> • 
                    <a href="https://github.com/evazhang612" target="_blank">github</a> • 
                    <a href="mailto:hello@evazhang.com">email</a>
                </p>
                
                <p style="color: #666;">this webpage was made ♡ with <a href="https://codeium.com/windsurf">ai editors</a></p>
                
                <hr>
                <p id="token-count" style="color: #666; font-size: 0.9em;">Calculating tokens...</p>
            </div>
        </div>
    </div>

    <div class="eva-geometric">
        <canvas id="evaCanvas" width="120" height="200"></canvas>
    </div>

    <script>
        // Minimalistic Flower Growth Animation - Milk and Honey Style
        (function() {
            const canvas = document.getElementById('evaCanvas');
            if (!canvas) return;
            
            const ctx = canvas.getContext('2d');
            let time = 0;
            let totalTime = 0;
            let isReversing = false;
            const scales = [];
            
            class Petal {
                constructor(x, y, angle, delay, index, totalPetals, type = 'petal') {
                    this.x = x;
                    this.y = y;
                    this.angle = angle;
                    this.size = 0;
                    this.targetSize = type === 'stem' ? 3 : 20;
                    this.delay = delay;
                    this.reverseDelay = (totalPetals - index - 1) * 100;
                    this.birth = 0;
                    this.opacity = 0;
                    this.currentSize = 0;
                    this.type = type;
                }
                
                shouldStart(totalTime, isReversing) {
                    const relevantDelay = isReversing ? this.reverseDelay : this.delay;
                    return totalTime > relevantDelay;
                }
                
                update(totalTime, isReversing, time) {
                    if (this.shouldStart(totalTime, isReversing)) {
                        const growthRate = this.type === 'stem' ? 0.012 : 0.008;
                        if (isReversing) {
                            this.birth = Math.max(0, this.birth - growthRate);
                        } else {
                            this.birth = Math.min(Math.PI/2, this.birth + growthRate);
                        }
                        this.size = this.targetSize * Math.sin(this.birth);
                        this.opacity = Math.min(this.birth * 0.8, 0.9);
                    }
                    
                    // Subtle breathing for petals, minimal for stem
                    const breatheIntensity = this.type === 'stem' ? 0.02 : 0.08;
                    const breathe = Math.sin(time * 0.001 + this.delay) * breatheIntensity;
                    this.currentSize = this.size * (1 + breathe);
                }
                
                draw(ctx) {
                    ctx.save();
                    ctx.translate(this.x, this.y);
                    ctx.rotate(this.angle);
                    ctx.globalAlpha = this.opacity;
                    
                    if (this.type === 'stem') {
                        // Draw stem as a simple line
                        ctx.beginPath();
                        ctx.moveTo(0, 0);
                        ctx.lineTo(0, this.currentSize * 8); // Stem length
                        ctx.strokeStyle = 'rgba(139, 115, 85, 0.8)'; // Warm brown
                        ctx.lineWidth = 2;
                        ctx.stroke();
                    } else {
                        // Draw petal shape
                        ctx.beginPath();
                        ctx.moveTo(0, -this.currentSize/2);
                        ctx.quadraticCurveTo(this.currentSize/2, -this.currentSize/4, this.currentSize/3, 0);
                        ctx.quadraticCurveTo(this.currentSize/2, this.currentSize/4, 0, this.currentSize/2);
                        ctx.quadraticCurveTo(-this.currentSize/2, this.currentSize/4, -this.currentSize/3, 0);
                        ctx.quadraticCurveTo(-this.currentSize/2, -this.currentSize/4, 0, -this.currentSize/2);
                        ctx.closePath();
                        
                        // Milk and Honey gradient fill
                        const gradient = ctx.createRadialGradient(0, 0, 0, 0, 0, this.currentSize/2);
                        gradient.addColorStop(0, 'rgba(245, 231, 186, 0.8)'); // Cream honey center
                        gradient.addColorStop(0.5, 'rgba(238, 213, 159, 0.6)'); // Soft gold
                        gradient.addColorStop(0.8, 'rgba(231, 192, 134, 0.4)'); // Muted honey
                        gradient.addColorStop(1, 'rgba(220, 180, 120, 0.2)'); // Pale amber edge
                        
                        ctx.fillStyle = gradient;
                        ctx.fill();
                        
                        // Delicate outline in warm earth tone
                        ctx.strokeStyle = 'rgba(180, 150, 100, 0.6)'; // Muted bronze
                        ctx.lineWidth = 0.6;
                        ctx.stroke();
                    }
                    
                    ctx.restore();
                }
                
                isComplete() {
                    return this.birth >= Math.PI/2;
                }
            }
            
            // Initialize flower with stem in Milk and Honey style
            const initializeFlower = () => {
                scales.length = 0;
                const numPetals = 36; // Fewer petals for more minimalist look
                const centerX = canvas.width / 2;
                const centerY = canvas.height / 2 - 10;
                
                // Add stem first (grows from bottom)
                const stemY = centerY + 20;
                const stem = new Petal(centerX, stemY, 0, 0, -2, numPetals, 'stem');
                scales.push(stem);
                
                // Create flower in layered circular pattern
                for (let i = 0; i < numPetals; i++) {
                    const layer = Math.floor(i / 12); // 3 layers of 12 petals each
                    const petalInLayer = i % 12;
                    const layerRadius = 12 + layer * 6; // Smaller, more delicate flower
                    
                    const angle = (petalInLayer / 12) * Math.PI * 2 + (layer * Math.PI / 18); // Offset each layer
                    const x = centerX + Math.cos(angle) * layerRadius;
                    const y = centerY + Math.sin(angle) * layerRadius;
                    
                    const petalAngle = angle + Math.PI/2; // Petals face outward
                    const delay = 500 + (layer * 12 + petalInLayer) * 60; // Stem grows first, then petals
                    
                    // Vary petal size by layer - more subtle variation
                    const petal = new Petal(x, y, petalAngle, delay, i, numPetals);
                    petal.targetSize = 10 + layer * 2; // Smaller, more delicate petals
                    
                    scales.push(petal);
                }
                
                // Add center pistil
                const pistil = new Petal(centerX, centerY, 0, 600, -1, numPetals);
                pistil.targetSize = 5; // Smaller center
                scales.push(pistil);
            };
            
            const animate = () => {
                // Clear with transparent background
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                
                // Check if all elements are complete
                const allComplete = scales.every(petal => petal.isComplete());
                const allReversed = scales.every(petal => petal.birth <= 0);
                
                // Switch direction if needed
                if (allComplete && !isReversing) {
                    isReversing = true;
                    totalTime = 0;
                } else if (allReversed && isReversing) {
                    isReversing = false;
                    totalTime = 0;
                }
                
                scales.forEach(petal => {
                    petal.update(totalTime, isReversing, time);
                    petal.draw(ctx);
                });
                
                time += 10;
                totalTime += 10;
                requestAnimationFrame(animate);
            };
            
            // Set canvas size and initialize
            canvas.width = 120;
            canvas.height = 160;
            initializeFlower();
            animate();
        })();

        // Show section based on hash
        function showSection(hash) {
            // Remove active class from all sections and links
            document.querySelectorAll('.section').forEach(section => {
                section.classList.remove('active');
                section.style.display = 'none';
            });
            document.querySelectorAll('.sidebar-nav a').forEach(link => {
                link.classList.remove('active');
            });
            
            // Show selected section and update token count
            const sectionId = hash ? hash.replace('#', '') : 'currently';
            const section = document.getElementById(sectionId);
            const link = document.querySelector(`a[href="#${sectionId}"]`);
            
            if (section) {
                section.classList.add('active');
                section.style.display = 'block';
                link.classList.add('active');

                // Show sub-nav for content section
                const contentSubnav = document.getElementById('content-subnav');
                if (sectionId === 'content' || ['research', 'writing', 'quotes', 'movies', 'reading', 'investing', 'projects'].includes(sectionId)) {
                    contentSubnav.classList.add('show');
                    document.querySelector('a[href="#content"]').classList.add('active');
                } else {
                    contentSubnav.classList.remove('show');
                }

                // Show sub-nav for random section
                const randomSubnav = document.getElementById('random-subnav');
                if (sectionId === 'random' || ['feedback', 'other-people', 'loaded-words'].includes(sectionId)) {
                    randomSubnav.classList.add('show');
                    document.querySelector('a[href="#random"]').classList.add('active');
                } else {
                    randomSubnav.classList.remove('show');
                }
                
                // Update token count for the current section
                const tokenCount = section.textContent.trim().split(/\s+/).length;
                document.getElementById('token-count').textContent = `${tokenCount} tokens in this section`;
            }
        }

        // Handle initial load
        showSection(window.location.hash);

        // Handle hash changes
        window.addEventListener('hashchange', () => {
            showSection(window.location.hash);
        });

        // Make content editable on double-click
        document.querySelector('.about-me').addEventListener('dblclick', function(e) {
            const element = e.target;
            if (element.tagName !== 'A') {  // Don't make links editable
                element.contentEditable = true;
                element.focus();
            }
        });

        // Save changes when pressing Enter or on blur
        document.querySelector('.about-me').addEventListener('keydown', function(e) {
            if (e.key === 'Enter' && !e.shiftKey) {
                e.preventDefault();
                e.target.contentEditable = false;
                saveChanges();
            }
        });

        document.querySelector('.about-me').addEventListener('blur', function(e) {
            e.target.contentEditable = false;
            saveChanges();
        });

        function saveChanges() {
            const content = document.documentElement.outerHTML;
            fetch('/save', {
                method: 'POST',
                headers: {
                    'Content-Type': 'text/html'
                },
                body: content
            });
        }

        // Remove old feedback form handler
        // document.getElementById('feedbackForm').addEventListener('submit', function(e) {
        //     e.preventDefault();
        //     const textarea = this.querySelector('textarea');
        //     const feedback = textarea.value;
            
        //     // Here you can add code to handle the feedback
        //     console.log('Feedback received:', feedback);
            
        //     // Clear the form and show confirmation
        //     textarea.value = '';
        //     alert('Thank you for your feedback!');
        // });
    </script>
</body>
</html>